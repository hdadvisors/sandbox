<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan Knopf (jonathan@hdadvisors.net)">

<title>HUD PRO Housing Priority Geographies in Virginia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="va-hud-pro-geos_files/libs/clipboard/clipboard.min.js"></script>
<script src="va-hud-pro-geos_files/libs/quarto-html/quarto.js"></script>
<script src="va-hud-pro-geos_files/libs/quarto-html/popper.min.js"></script>
<script src="va-hud-pro-geos_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="va-hud-pro-geos_files/libs/quarto-html/anchor.min.js"></script>
<link href="va-hud-pro-geos_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="va-hud-pro-geos_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="va-hud-pro-geos_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="va-hud-pro-geos_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="va-hud-pro-geos_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HUD PRO Housing Priority Geographies in Virginia</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jonathan Knopf (jonathan@hdadvisors.net) </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p><a href="https://www.hud.gov/program_offices/comm_planning/pro_housing">PRO Housing grant information</a> (HUD website)<br>
<a href="https://www.hud.gov/sites/dfiles/CPD/documents/PRO-Housing-Quick-Summary-7.26.23.pdf">PRO Housing Quick Summary</a> (PDF)<br>
<a href="https://www.hud.gov/sites/dfiles/CPD/documents/PRO-Housing-FAQs-07262023.pdf">PRO Housing FAQ</a> (PDF)</p>
<section id="priority-geographies" class="level2">
<h2 class="anchored" data-anchor-id="priority-geographies">Priority geographies</h2>
<p>HUD has identified specific local geographies with high needs that will be prioritized for the program. A spreadsheet of these areas is published on the grant web page, and linked below.</p>
<p><a href="https://www.hud.gov/sites/dfiles/CPD/documents/Acute-Demand-for-Housing-priority-geographies.xlsx">FY 23 PRO Housing List of Priority Geographies</a> (.xlsx)</p>
<p>Geography types include:</p>
<ul>
<li>Counties</li>
<li>Cities</li>
<li>Towns</li>
<li>Census Designated Places (CDPs)</li>
</ul>
<section id="priority-geographies-in-virginia" class="level3">
<h3 class="anchored" data-anchor-id="priority-geographies-in-virginia">Priority geographies in Virginia</h3>
<p>HUD assigned priority status to 249 geographies in Virginia. These are located across all 21 of Virginiaâ€™s Planning District Commissions (PDCs) and include:</p>
<ul>
<li>31 counties</li>
<li>9 cities</li>
<li>71 towns</li>
<li>138 CDPs</li>
</ul>
<div class="cell">
<div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="filter-label" for="filter">Select PDC:</label>
<div>
<select id="filter" class="shiny-input-select"><option value="All" selected="">All</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Middle Peninsula">Middle Peninsula</option>
<option value="Northern Neck">Northern Neck</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Southside">Southside</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="PlanRVA">PlanRVA</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="New River Valley">New River Valley</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="New River Valley">New River Valley</option>
<option value="Southside">Southside</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Middle Peninsula">Middle Peninsula</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="PlanRVA">PlanRVA</option>
<option value="New River Valley">New River Valley</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Middle Peninsula">Middle Peninsula</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="George Washington">George Washington</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="New River Valley">New River Valley</option>
<option value="Roanoke Valley-Alleghany/West Piedmont">Roanoke Valley-Alleghany/West Piedmont</option>
<option value="Thomas Jefferson">Thomas Jefferson</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Roanoke Valley-Alleghany">Roanoke Valley-Alleghany</option>
<option value="West Piedmont">West Piedmont</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Central Virginia">Central Virginia</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Southside">Southside</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Thomas Jefferson">Thomas Jefferson</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="George Washington">George Washington</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="New River Valley">New River Valley</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="West Piedmont">West Piedmont</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="New River Valley">New River Valley</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="West Piedmont">West Piedmont</option>
<option value="New River Valley">New River Valley</option>
<option value="New River Valley">New River Valley</option>
<option value="New River Valley">New River Valley</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Southside">Southside</option>
<option value="George Washington">George Washington</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Southside">Southside</option>
<option value="Southside">Southside</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Roanoke Valley-Alleghany">Roanoke Valley-Alleghany</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Central Virginia">Central Virginia</option>
<option value="Southside">Southside</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Central Virginia">Central Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Southside">Southside</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Roanoke Valley-Alleghany/West Piedmont">Roanoke Valley-Alleghany/West Piedmont</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Lenowisco">Lenowisco</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="New River Valley">New River Valley</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="New River Valley">New River Valley</option>
<option value="Lenowisco">Lenowisco</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Thomas Jefferson">Thomas Jefferson</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Middle Peninsula">Middle Peninsula</option>
<option value="New River Valley">New River Valley</option>
<option value="PlanRVA">PlanRVA</option>
<option value="George Washington">George Washington</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="George Washington">George Washington</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="Lenowisco">Lenowisco</option>
<option value="Middle Peninsula">Middle Peninsula</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="New River Valley">New River Valley</option>
<option value="New River Valley">New River Valley</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="PlanRVA">PlanRVA</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="New River Valley">New River Valley</option>
<option value="Northern Neck">Northern Neck</option>
<option value="Thomas Jefferson">Thomas Jefferson</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Middle Peninsula">Middle Peninsula</option>
<option value="PlanRVA">PlanRVA</option>
<option value="Crater">Crater</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="West Piedmont">West Piedmont</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Thomas Jefferson">Thomas Jefferson</option>
<option value="New River Valley">New River Valley</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Commonwealth Regional Council">Commonwealth Regional Council</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="West Piedmont">West Piedmont</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Roanoke Valley-Alleghany">Roanoke Valley-Alleghany</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Roanoke Valley-Alleghany/West Piedmont">Roanoke Valley-Alleghany/West Piedmont</option>
<option value="Roanoke Valley-Alleghany/West Piedmont">Roanoke Valley-Alleghany/West Piedmont</option>
<option value="Roanoke Valley-Alleghany/West Piedmont">Roanoke Valley-Alleghany/West Piedmont</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Crater">Crater</option>
<option value="Lenowisco">Lenowisco</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Thomas Jefferson">Thomas Jefferson</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="New River Valley">New River Valley</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="West Piedmont">West Piedmont</option>
<option value="Lenowisco">Lenowisco</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Shenandoah">Northern Shenandoah</option>
<option value="Rappahannock-Rapidan">Rappahannock-Rapidan</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Hampton Roads">Hampton Roads</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Mount Rogers">Mount Rogers</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="PlanRVA">PlanRVA</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Lenowisco">Lenowisco</option>
<option value="Cumberland Plateau">Cumberland Plateau</option>
<option value="Central Shenandoah">Central Shenandoah</option>
<option value="Accomack-Northampton">Accomack-Northampton</option>
<option value="Northern Virginia">Northern Virginia</option>
<option value="Northern Neck">Northern Neck</option></select>
<script type="application/json" data-for="filter" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
<div class="cell-output-display">

<div class="col-sm-8" role="main">
<div class="tabbable">
<ul class="nav nav-tabs" data-tabsetid="8217">
<li class="active">
<a href="#tab-8217-1" data-toggle="tab" data-bs-toggle="tab" data-value="Map">Map</a>
</li>
<li>
<a href="#tab-8217-2" data-toggle="tab" data-bs-toggle="tab" data-value="Table">Table</a>
</li>
</ul>
<div class="tab-content" data-tabsetid="8217">
<div class="tab-pane active" data-value="Map" id="tab-8217-1">
<div class="leaflet html-widget html-widget-output shiny-report-size html-fill-item-overflow-hidden html-fill-item" id="map" style="width:100%;height:400px;"></div>
</div>
<div class="tab-pane" data-value="Table" id="tab-8217-2">
<div class="datatables html-widget html-widget-output shiny-report-size html-fill-item-overflow-hidden html-fill-item" id="table" style="width:100%;height:auto;"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="priority-geography-faq" class="level2">
<h2 class="anchored" data-anchor-id="priority-geography-faq">Priority geography FAQ</h2>
<p>Important information on priority geographies from the FAQ are quoted below. Click each question to expand.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is a priority geography?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Under the Need rating factor, applicants will be awarded ten (10) points if their application primarily serves a â€˜priority geographyâ€™. Priority geography means a geography that has an affordable housing need greater than a threshold calculation for one of three measures. The threshold calculation is determined by the need of the 90th-percentile jurisdiction (top 10%) for each factor as computed comparing only jurisdictions with greater than 50,000 population. Threshold calculations are done at the county and place level and applied respectively to county and place applicants. An application can also quality as a priority geography if it serves a geography that scores in the top 5% of its State for the same three measures. The measures are as follows:</p>
<ul>
<li>Affordable housing not keeping pace, measured as (change in population 2019-2009 divided by 2009 population) â€“ (change in number of units affordable and available to households at 80% HUD Area Median Family Income (HAMFI) 2019-2009 divided by units affordable and available at 80% HAMFI 2009).</li>
<li>Insufficient affordable housing, measured as number of households at 80% HAMFI divided by number of affordable and available units for households at 80% HAMFI.</li>
<li>Widespread housing cost burden or substandard housing, measured as number of households with housing problems at 100% HAMFI divided by number of households at 100% HAMFI. Housing problems is defined as: cost burden of at least 50%, overcrowding, or substandard housing.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What if Iâ€™m not a priority geography?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Applicants who are not listed as priority geographies are still invited to apply.</p>
<p>The Need rating factor offers an additional five (5) points for providing compelling information about your affordable housing needs. This information should demonstrate acute demand for affordable housing in your jurisdiction(s) to households with incomes below 100 percent of the area median income. In your narrative, you are encouraged to provide local knowledge that is not already captured by the above measures. Topics that may indicate acute demand for affordable housing include displacement pressures, housing stock condition, age of housing stock, homelessness, ratio of median home price to area median income, and more.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Iâ€™m applying as an MPO or multijurisdictional entity. How do I determine if Iâ€™m a priority geography?
</div>
</div>
<div class="callout-body-container callout-body">
<p>MPOs and multijurisdictional entities may qualify as a priority geography if the proposed activities primarily serve least one county or place that is a priority geography. The geographical scope of the activity should be clearly identified in the application.</p>
</div>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library(tidyverse)
library(leaflet)
library(htmlwidgets)
library(htmltools)
library(shiny)
library(DT)

setwd("C:/Users/Jonathan/Documents/repos/sandbox/hud-pro/")

geos_priority <- read_rds("geos_priority.rds")

pdc_pal <- colorFactor(rainbow(23), unique(geos_priority$pdc))

</script>
 
<script type="application/shiny-prerendered" data-context="server">
filtered_data <- reactive({
  if (input$filter == "All") {
    geos_priority
  } else {
    subset(geos_priority, pdc == input$filter)
  }
})

output$map <- renderLeaflet({
  leaflet(geos_priority) |> 
    addProviderTiles(providers$CartoDB.Positron) |> 
    addPolygons(
      fillColor = ~pdc_pal(pdc),
      fillOpacity = 0.5,
      color = ~pdc_pal(pdc),
      weight = 2,
      label = ~popup
    ) |>  
    fitBounds(~min(min_x), ~min(min_y), ~max(max_x), ~max(max_y))
})

observe({
  leafletProxy("map", data = filtered_data()) |> 
    clearShapes() |> 
    addPolygons(
      fillColor = ~pdc_pal(pdc),
      fillOpacity = 0.5,
      color = ~pdc_pal(pdc),
      weight = 2,
      label = ~popup
    ) |>   
    fitBounds(~min(min_x), ~min(min_y), ~max(max_x), ~max(max_y))
})

output$table <- renderDT({
  DT::datatable(
    filtered_data()[1],
    options = list(
      
    )
  )
})


</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.12.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.5.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["leaflet"]},{"type":"character","attributes":{},"value":["1.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/leaflet"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet.js"]},{"type":"character","attributes":{},"value":["leaflet.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["leafletfix"]},{"type":"character","attributes":{},"value":["1.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/leafletfix"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leafletfix.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["proj4"]},{"type":"character","attributes":{},"value":["2.6.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/plugins/Proj4Leaflet"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["proj4.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["2.1.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["Proj4Leaflet"]},{"type":"character","attributes":{},"value":["1.0.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/plugins/Proj4Leaflet"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["proj4leaflet.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["2.1.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["rstudio_leaflet"]},{"type":"character","attributes":{},"value":["1.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/rstudio_leaflet"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rstudio_leaflet.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.1.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["leaflet-binding"]},{"type":"character","attributes":{},"value":["2.1.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["leaflet"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["2.1.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.28"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.28"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.28"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.0"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69]}},"value":[{"type":"character","attributes":{},"value":["base","bslib","cachem","cli","colorspace","compiler","crosstalk","datasets","digest","dplyr","DT","ellipsis","evaluate","fansi","fastmap","forcats","generics","ggplot2","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","leaflet","lifecycle","lubridate","magrittr","memoise","methods","mime","munsell","pillar","pkgconfig","promises","purrr","R6","Rcpp","readr","rlang","rmarkdown","rstudioapi","sass","scales","shiny","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.3.0","0.5.1","1.0.8","3.6.1","2.1-0","4.3.0","1.2.0","4.3.0","0.6.33","1.1.2","0.28","0.3.2","0.21","1.0.4","1.1.1","1.0.0","0.1.3","3.4.3","1.6.2","4.3.0","4.3.0","4.3.0","0.3.3","1.1.3","0.5.6","1.6.2","1.6.11","0.1.4","1.8.7","1.43","1.3.1","2.1.2","1.0.3","1.9.2","2.0.3","2.0.1","4.3.0","0.12","0.5.0","1.9.0","2.0.3","1.2.1","1.0.2","2.5.1","1.0.11","2.1.4","1.1.1","2.24","0.15.0","0.4.7","1.2.1","1.7.5","4.3.0","1.7.12","1.5.0","3.2.1","1.3.0","1.2.0","2.0.0","0.2.0","4.3.0","0.4.0","1.2.3","4.3.0","0.6.3","2.5.0","0.40","1.8-4","2.3.7"]}]}]}
</script>
<!--/html_preserve-->
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>